{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ corpus.name }} - TABA{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>
          <i class="fas fa-database"></i>
          {{ corpus.name }}
        </h1>
        <a href="{% url 'taba:corpus-list' %}" class="btn btn-secondary">
          <i class="fas fa-arrow-left"></i> {% trans "Back to Corpora List" %}
        </a>
      </div>

      <!-- Corpus Information -->
      <div class="row">
        <div class="col-md-8">
          <div class="card mb-4">
            <div class="card-header bg-primary text-white">
              <i class="fas fa-info-circle"></i> {% trans "Corpus Information" %}
            </div>
            <div class="card-body">
              <dl class="row">
                <dt class="col-sm-3">{% trans "Name" %}:</dt>
                <dd class="col-sm-9">{{ corpus.name }}</dd>

                <dt class="col-sm-3">{% trans "Description" %}:</dt>
                <dd class="col-sm-9">{{ corpus.description|default:"â€”" }}</dd>

                <dt class="col-sm-3">{% trans "Language" %}:</dt>
                <dd class="col-sm-9">
                  <span class="badge badge-info">{{ corpus.language|upper }}</span>
                </dd>

                <dt class="col-sm-3">{% trans "Source Type" %}:</dt>
                <dd class="col-sm-9">
                  <span class="badge badge-secondary">{{ corpus.get_source_type_display }}</span>
                </dd>

                {% if corpus.source_path %}
                <dt class="col-sm-3">{% trans "Source Path" %}:</dt>
                <dd class="col-sm-9"><code>{{ corpus.source_path }}</code></dd>
                {% endif %}

                <dt class="col-sm-3">{% trans "Owner" %}:</dt>
                <dd class="col-sm-9">{{ corpus.owner.username }}</dd>

                <dt class="col-sm-3">{% trans "Created" %}:</dt>
                <dd class="col-sm-9">{{ corpus.created_at|date:"d/m/Y H:i" }}</dd>

                <dt class="col-sm-3">{% trans "Last Updated" %}:</dt>
                <dd class="col-sm-9">{{ corpus.updated_at|date:"d/m/Y H:i" }}</dd>
              </dl>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card mb-4">
            <div class="card-header bg-success text-white">
              <i class="fas fa-chart-bar"></i> {% trans "Statistics" %}
            </div>
            <div class="card-body text-center">
              <div class="mb-3">
                <h2 class="text-primary">{{ corpus.total_texts }}</h2>
                <small>{% trans "Total Texts" %}</small>
              </div>
              <div>
                <h2 class="text-success">{{ corpus.total_characters|intcomma }}</h2>
                <small>{% trans "Total Characters" %}</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Texts in Corpus -->
      <div class="card">
        <div class="card-header bg-info text-white">
          <i class="fas fa-file-alt"></i> {% trans "Texts in Corpus" %} ({{ texts|length }})
        </div>
        <div class="card-body">
          {% if texts %}
          <table class="table table-sm table-hover">
            <thead>
              <tr>
                <th>{% trans "Title" %}</th>
                <th>{% trans "Filename" %}</th>
                <th>{% trans "Language" %}</th>
                <th class="text-right">{% trans "Characters" %}</th>
                <th class="text-right">{% trans "Words" %}</th>
                <th>{% trans "Created" %}</th>
              </tr>
            </thead>
            <tbody>
              {% for text in texts %}
              <tr>
                <td><strong>{{ text.title }}</strong></td>
                <td><code>{{ text.filename }}</code></td>
                <td><span class="badge badge-secondary">{{ text.language|upper }}</span></td>
                <td class="text-right">{{ text.character_count }}</td>
                <td class="text-right">{{ text.word_count }}</td>
                <td>{{ text.created_at|date:"d/m/Y" }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          {% else %}
          <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            {% trans "No texts in this corpus yet. Add texts in the Django admin." %}
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Actions -->
      <div class="mt-4">
        <a href="/admin/taba_pipeline/groundtruthcorpus/{{ corpus.pk }}/change/" class="btn btn-warning">
          <i class="fas fa-edit"></i> {% trans "Edit in Admin" %}
        </a>
        <a href="/admin/taba_pipeline/groundtruthtext/add/?corpus={{ corpus.pk }}" class="btn btn-success">
          <i class="fas fa-plus"></i> {% trans "Add Text in Admin" %}
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
