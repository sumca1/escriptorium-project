<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×“×™×§×ª ×œ×—×¦×Ÿ - Debug Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #1e293b;
            color: white;
            padding: 2rem;
            direction: rtl;
        }
        .test-section {
            background: #334155;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1rem;
            margin: 0.5rem;
        }
        button:hover {
            background: #2563eb;
        }
        .log {
            background: #1e293b;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
    </style>
</head>
<body>
    <h1>ğŸ” ×‘×“×™×§×ª ××¢×¨×›×ª ×”×œ×—×¦× ×™×</h1>
    
    <div class="test-section">
        <h2>1ï¸âƒ£ ×‘×“×™×§×ª ×—×™×‘×•×¨ ×œ×©×¨×ª</h2>
        <button onclick="testServerConnection()">×‘×“×•×§ ×—×™×‘×•×¨ ×œ-Terminal Server</button>
        <button onclick="testDashboardServer()">×‘×“×•×§ ×—×™×‘×•×¨ ×œ-Dashboard Server</button>
    </div>
    
    <div class="test-section">
        <h2>2ï¸âƒ£ ×‘×“×™×§×ª ×¤×•× ×§×¦×™×•×ª</h2>
        <button onclick="testStartServer()">×”×¤×¢×œ startTerminalServer()</button>
        <button onclick="testShowInstructions()">×”×¦×’ ×”×•×¨××•×ª</button>
    </div>
    
    <div class="test-section">
        <h2>3ï¸âƒ£ ×”×¤×¢×œ×ª ×§×‘×¦×™× ××§×•××™×™×</h2>
        <button onclick="testVBSLaunch()">× ×¡×” ×œ×”×¤×¢×™×œ VBS (×œ× ×™×¢×‘×•×“ ××“×¤×“×¤×Ÿ!)</button>
        <button onclick="openControlCenterFolder()">×¤×ª×— ×ª×™×§×™×™×ª Control Center</button>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š ×œ×•×’ ×‘×“×™×§×•×ª:</h2>
        <div id="log" class="log"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString('he-IL');
            const colorClass = type;
            logDiv.innerHTML += `<div class="${colorClass}">[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function testServerConnection() {
            log('ğŸ” ×‘×•×“×§ ×—×™×‘×•×¨ ×œ-Terminal Server (port 3000)...', 'info');
            try {
                const response = await fetch('http://localhost:3000/health', {
                    method: 'GET',
                    mode: 'cors'
                });
                if (response.ok) {
                    log('âœ… Terminal Server ×¤×¢×™×œ! StatusCode: ' + response.status, 'success');
                    const data = await response.json();
                    log('ğŸ“Š ×ª×’×•×‘×”: ' + JSON.stringify(data), 'info');
                } else {
                    log('âš ï¸ ×”×©×¨×ª ×¢× ×” ××‘×œ ×¢× ×©×’×™××”: ' + response.status, 'warning');
                }
            } catch (error) {
                log('âŒ Terminal Server ×œ× ×¤×¢×™×œ: ' + error.message, 'error');
                log('ğŸ’¡ ×¤×ª×¨×•×Ÿ: ×”×¨×¥ ××ª start-servers.vbs ××• start-terminal-server.bat', 'warning');
            }
        }

        async function testDashboardServer() {
            log('ğŸ” ×‘×•×“×§ ×—×™×‘×•×¨ ×œ-Dashboard Server (port 8080)...', 'info');
            try {
                const response = await fetch('http://localhost:8080', {
                    method: 'HEAD'
                });
                if (response.ok) {
                    log('âœ… Dashboard Server ×¤×¢×™×œ! StatusCode: ' + response.status, 'success');
                } else {
                    log('âš ï¸ Dashboard Server ×¢× ×” ×¢× ×©×’×™××”: ' + response.status, 'warning');
                }
            } catch (error) {
                log('âŒ Dashboard Server ×œ× ×¤×¢×™×œ: ' + error.message, 'error');
                log('ğŸ’¡ ×¤×ª×¨×•×Ÿ: dashboard-server ×××•×¨ ×œ×”×™×¤×ª×— ××•×˜×•××˜×™×ª ×¢"×™ auto-start-terminal-server.ps1', 'warning');
            }
        }

        function testStartServer() {
            log('ğŸš€ ×× ×¡×” ×œ×§×¨×•× ×œ-startTerminalServer()...', 'info');
            log('âš ï¸ ×©×™× ×œ×‘: ×”×¤×•× ×§×¦×™×” ×”×–×• ×××•×¨×” ×œ×”×¦×™×’ modal, ×œ× ×œ×”×¤×¢×™×œ ××ª ×”×©×¨×ª ×‘×¤×•×¢×œ!', 'warning');
            log('âŒ ×”×¡×™×‘×”: ×“×¤×“×¤× ×™× ×œ× ×™×›×•×œ×™× ×œ×”×¤×¢×™×œ ×§×‘×¦×™× ××§×•××™×™× (.bat/.vbs/.ps1) ××¡×™×‘×•×ª ××‘×˜×—×”', 'error');
            log('âœ… ×”×¤×ª×¨×•×Ÿ ×”× ×›×•×Ÿ: ×”×¦×’×ª ×”×•×¨××•×ª ×œ××©×ª××© ××™×š ×œ×”×¤×¢×™×œ ×™×“× ×™×ª', 'success');
            
            // × ×¡×” ×œ×§×¨×•× ×œ×¤×•× ×§×¦×™×”
            if (typeof startTerminalServer === 'function') {
                log('âœ… ×”×¤×•× ×§×¦×™×” startTerminalServer ×§×™×™××ª!', 'success');
            } else {
                log('âŒ ×”×¤×•× ×§×¦×™×” startTerminalServer ×œ× × ××¦××”!', 'error');
                log('ğŸ’¡ ×–×” ××•××¨ ×©××ª×” ×œ× ×‘×“×£ dashboard.html', 'info');
            }
        }

        function testShowInstructions() {
            log('ğŸ“‹ ××¦×™×’ modal ×¢× ×”×•×¨××•×ª ×”×¤×¢×œ×”...', 'info');
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; color: #1e293b; padding: 2rem; border-radius: 12px; max-width: 500px; text-align: right;">
                    <h2 style="color: #1e3a8a; margin-bottom: 1rem;">ğŸš€ ×”×¤×¢×œ×ª ×”×©×¨×ª×™×</h2>
                    <p style="margin-bottom: 1rem;">×œ×—×¥ ×¤×¢××™×™× ×¢×œ ××—×“ ××”×§×‘×¦×™×:</p>
                    <ol style="text-align: right; padding-right: 1.5rem;">
                        <li><strong>start-servers.vbs</strong> (××•××œ×¥!)</li>
                        <li><strong>start-terminal-server.bat</strong></li>
                    </ol>
                    <p style="margin-top: 1rem; color: #64748b; font-size: 0.9rem;">
                        ğŸ“‚ ××™×§×•×: control-center\\
                    </p>
                    <button onclick="this.closest('div[style*=fixed]').remove()" 
                            style="margin-top: 1rem; width: 100%; background: #3b82f6; color: white; border: none; padding: 0.75rem; border-radius: 6px; cursor: pointer;">
                        ×”×‘× ×ª×™ âœ“
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            log('âœ… Modal ×”×•×¦×’ ×‘×”×¦×œ×—×”!', 'success');
        }

        function testVBSLaunch() {
            log('âš ï¸ ×× ×¡×” ×œ×”×¤×¢×™×œ VBS ××”×“×¤×“×¤×Ÿ...', 'warning');
            log('âŒ ×–×” ×œ× ×™×¢×‘×•×“! ×“×¤×“×¤× ×™× ×—×•×¡××™× ×”×¤×¢×œ×ª ×§×‘×¦×™× ××§×•××™×™×', 'error');
            log('ğŸ”’ ×¡×™×‘×”: ××‘×˜×—×” - ×œ×× ×•×¢ malware ××œ×”×¨×™×¥ ×§×‘×¦×™×', 'info');
            
            try {
                const link = document.createElement('a');
                link.href = 'file:///i:/OCR_Arabic_Testing/BiblIA_dataset-project/BiblIA_dataset/escriptorium/ui/control-center/start-servers.vbs';
                link.click();
                log('âš ï¸ × ×™×¡×™×•×Ÿ × ×¢×©×”, ××‘×œ ×›× ×¨××” × ×—×¡×', 'warning');
            } catch (error) {
                log('âŒ ×©×’×™××”: ' + error.message, 'error');
            }
            
            log('ğŸ’¡ ×¤×ª×¨×•×Ÿ: ×¤×ª×— ××ª File Explorer ×•×”×¤×¢×œ ××ª ×”×§×•×‘×¥ ×™×“× ×™×ª', 'success');
        }

        function openControlCenterFolder() {
            log('ğŸ“‚ ×× ×¡×” ×œ×¤×ª×•×— ××ª ×ª×™×§×™×™×ª control-center...', 'info');
            const folderPath = 'file:///i:/OCR_Arabic_Testing/BiblIA_dataset-project/BiblIA_dataset/escriptorium/ui/control-center';
            window.open(folderPath, '_blank');
            log('âœ… × ×™×¡×™×•×Ÿ ×œ×”×¦×™×’ ××ª ×”×ª×™×§×™×™×” (×¢×©×•×™ ×œ×”×™×—×¡× ×‘×“×¤×“×¤× ×™× ××¡×•×™××™×)', 'warning');
        }

        // ×”×¨×¥ ×‘×“×™×§×•×ª ××•×˜×•××˜×™×•×ª ×‘×˜×¢×™× ×”
        window.addEventListener('load', () => {
            log('ğŸ‰ ××¢×¨×›×ª ×‘×“×™×§×•×ª × ×˜×¢× ×”!', 'success');
            log('ğŸ“ ×œ×—×¥ ×¢×œ ×”×›×¤×ª×•×¨×™× ×œ××¢×œ×” ×›×“×™ ×œ×‘×¦×¢ ×‘×“×™×§×•×ª', 'info');
            log('', 'info');
            
            // ×‘×“×™×§×” ××•×˜×•××˜×™×ª
            setTimeout(async () => {
                log('ğŸ¤– ××ª×—×™×œ ×‘×“×™×§×•×ª ××•×˜×•××˜×™×•×ª...', 'info');
                await testServerConnection();
                setTimeout(() => testDashboardServer(), 1000);
            }, 500);
        });
    </script>
</body>
</html>
